\documentclass[12pt]{article}

\usepackage{amsmath}

\begin{document}

\section*{OIS Curve Fitting}

Let $f_0$ denote the daily compounded overnight rate for $[0, 6m]$. Using the $6m$ OIS, we have:

\begin{gather*}
PV_{6m}^{fix} = PV_{6m}^{flt} \\
\text{Do}(0, 6m) \times 0.5 \times 0.25\% = \text{Do}(0, 6m) \times \left[\left(1 + \frac{f_0}{360}\right)^{180} - 1\right]
\end{gather*}

\noindent We can now solve for $f_0$, which can be expressed as:

\begin{gather*}
f_0 = 360 \left[\left(\frac{1}{800} +1\right)^\frac{1}{180}
-1\right]
= \underline{0.24985\%}
\end{gather*}

\noindent Having obtained this, we can then let $f_1$ denote the daily compounded overnight rate for $[6\text{m}, 1\text{y}]$. Using the $1\text{y}$ OIS, we have:

\begin{gather*}
PV_{1y}^{fix} = PV_{1y}^{flt} \\
\text{Do}(0, 1y) \times 0.3\% = \text{Do}(0, 1y) \times\left[
\left(1 + \frac{f_0}{360}\right)^{180} \left(1 + \frac{f_1}{360}\right)^{180} - 1\right]
\end{gather*}

\noindent We can now solve for $f_1$. a s:

\begin{gather*}
 = 360 \left[\left(\left(\frac{1003}{1000}\right) /\left( 1+\frac{f_0}{360}
\right)^{180}\right)^{\frac{1}{180}} -1\right]
= \underline{0.34926\%}
\end{gather*}


\noindent Next, we move on to the $2y$ OIS. Let $f_2$ denote the daily compounded overnight rate for $[1y, 2y]$. We have:

\begin{gather*}
PV_{2y}^{\text{fix}} = PV_{2y}^{\text{flt}} \\
\left[\text{Do}(0, 1y) + \text{Do}(0, 2y)\right] \times 0.325\% = 
\text{Do}(0, 1y) \times \left[\left(1 + \frac{f_0}{360}\right)^{180} \left(1 + \frac{f_1}{360}\right)^{180} - 1\right]\\
+ \text{Do}(0, 2y) \times \left[\left(1 + \frac{f_2}{360}\right)^{360} - 1\right]\\
\end{gather*}

\begin{gather*}
\left[\text{Do}(0, 1y) + \text{Do}(0, 2y)\right] \times 0.325\% = PV_{1y}^{} + \text{Do}(0, 2y) \times \left[\left(1 + \frac{f_2}{360}\right)^{360} - 1\right]\\
\end{gather*}

\begin{gather*}
\left[\text{Do}(0, 1y) + \text{Do}(0, 2y)\right] \times 0.325\% = PV_{1y}^{} + \text{Do}(0, 1y) - \text{Do}(0, 2y)
\end{gather*}

\begin{gather*}
\left[1+0.325\%\right] \times \text{Do}(0, 2y) = PV_{1y}^{} + \left[1-0.325\%\right] \times \text{Do}(0, 1y)
\end{gather*}

\begin{gather*}
\text{Do}(0, 2y) =
\frac{PV_{1y}^{} + \left[1-0.325\%\right] \times \text{Do}(0, 1y)}{\left[1+0.325\%\right]} = \underline{99.35307\%}
\end{gather*}

\noindent Now solve for \(f_2\):

\begin{gather*}
\text{Do}(0, 1y) - \text{Do}(0, 2y) = \text{Do}(0, 2y)) \times \left[\left(1 + \frac{f_2}{360}\right)^{360} - 1\right]\\
\end{gather*}

\begin{gather*}
\frac{\text{Do}(0, 1y)}{\text{Do}(0, 2y)} - 1= \left(1 + \frac{f_2}{360}\right)^{360} - 1
\end{gather*}

\begin{gather*}
f_2 = \left[\left(\frac{\text{Do}(0, 1y)}{\text{Do}(0, 2y)}\right)^{\frac{1}{360}} -1 \right] \times 360 = \underline{0.34948\%}\\
\end{gather*}

\noindent Moving on to \(f_3\):

\begin{gather*}
\left[\text{Do}(0, 1y) + \text{Do}(0, 2y) + \text{Do}(0, 3y)\right] \times 0.335\% = PV_{2y}^{} + 
\text{Do}(0, 3y)) \times \left[\left(1 + \frac{f_3}{360}\right)^{360} - 1\right]
\end{gather*}

\begin{gather*}
\left[\text{Do}(0, 1y) + \text{Do}(0, 2y) + \text{Do}(0, 3y)\right] \times 0.335\% = PV_{2y}^{} + 
\left[ \text{Do}(0, 2y) -  \text{Do}(0, 3y)\right]
\end{gather*}

\begin{gather*}
\left(0.355\%+1\right) \times \text{Do}(0, 3y) = PV_{2y}^{} + \left(1-0.335\%\right) \times \text{Do}(0, 2y) - 0.335\% \times \text{Do}(0, 1y)
\end{gather*}

\begin{gather*}
\text{Do}(0, 3y) = \frac{PV_{2y}^{} + \left(1-0.335\%\right) \times \text{Do}(0, 2y) - 0.335\% \times \text{Do}(0, 1y)}{0.355\%+1}
\end{gather*}

\begin{gather*}
\text{Do}(0, 3y) = \underline{
99.00151\%} , f_3 = \underline{0.35448\%}\\
\end{gather*}

\noindent Now we will express \text{Do}(0, y) in a more general expression:

\begin{gather*}
\sum_{i=1}^{y} D_0(0, y) \times R_y
= PV_{y-1}^{} + \text{Do}(0, y-1) - \text{Do}(0, y)
\end{gather*}

\begin{gather*}
\left(R_y + 1\right) \times \text{Do}(0, y) = PV_{y-1}^{} + \text{Do}(0, y-1) - \sum_{i=1}^{y-1} D_0(0, y) \times R_y
\end{gather*}

\begin{gather*}
\text{Do}(0, y) = \frac{PV_{y-1}^{} + \text{Do}(0, y-1) - \sum_{i=1}^{y-1} D_0(0, y) \times R_y}{R_y + 1}
\end{gather*}

\noindent Using this methodology we can derive:

\begin{gather*}
\text{Do}(0, 4y) = \underline{
98.61166\%} , f_4 = \underline{0.39456\%}\\
\text{Do}(0, 5y) = \underline{
98.21841\%} , f_5 = \underline{0.39959\%}\\
\end{gather*}

\noindent Since 6y tenor has no given rate, we will have to skip it and go to 7y:

\begin{gather*}
\text{Do}(0, 7y) = \frac{PV_{6y}^{} + \text{Do}(0, 6y) - \sum_{i=1}^{6} D_0(0, y) \times R_7}{R_7 + 1}
\end{gather*}

\begin{gather*}
\text{Do}(0, 7y) = \frac{PV_{5y}^{} + \text{Do}(0, 5y) - \text{Do}(0, 6y) + \text{Do}(0, 6y) - \sum_{i=1}^{6} D_0(0, y) \times R_7}{R_7 + 1}
\end{gather*}


\begin{gather*}
\text{Do}(0, 7y) = \frac{PV_{5y}^{} + \text{Do}(0, 5y) - \sum_{i=1}^{6} D_0(0, y) \times R_7}{R_7 + 1}
\end{gather*}

\begin{gather*}
\text{Do}(0, 7y) = \frac{PV_{5y}^{} + \text{Do}(0, 5y) - \left[\left(\sum_{i=1}^{5} D_0(0, y) + \frac{\text{Do}(0, 5y) + \text{Do}(0, 7y)}{2} \right) \times R_7 \right]}{R_7 + 1}
\end{gather*}

\begin{gather*}
\text{Do}(0, 7y) = \frac{PV_{5y}^{} + \text{Do}(0, 5y) - \left[\left(\sum_{i=1}^{5} D_0(0, y) + \frac{\text{Do}(0, 5y))}{2} \right) \times R_7 \right]}{R_7 + 1} - \frac{\left( \text{Do}(0, 7y) \times R_7 \right) /2}{R_7 + 1}
\end{gather*}

\begin{gather*}
\text{Do}(0, 7y) + \frac{\left( \text{Do}(0, 7y) \times R_7 \right) }{2 \times \left( R_7 + 1 \right)}
= \frac{PV_{5y}^{} + \text{Do}(0, 5y) - \left[\left(\sum_{i=1}^{5} D_0(0, y) + \frac{\text{Do}(0, 5y))}{2} \right) \times R_7 \right]}{R_7 + 1}
\end{gather*}

\begin{gather*}
\text{Do}(0, 7y) \times \left( 1 + \frac{R_7}{2 \times \left( R_7 + 1 \right)} \right)
= \frac{PV_{5y}^{} + \text{Do}(0, 5y) - \left[\left(\sum_{i=1}^{5} D_0(0, y) + \frac{\text{Do}(0, 5y))}{2} \right) \times R_7 \right]}{R_7 + 1}
\end{gather*}

\begin{gather*}
\text{Do}(0, 7y) 
= \frac{PV_{5y}^{} + \text{Do}(0, 5y) - \left[\left(\sum_{i=1}^{5} D_0(0, y) + \frac{\text{Do}(0, 5y))}{2} \right) \times R_7 \right]}{R_7 + 1} / 
\left( 1 + \frac{R_7}{2 \times \left( R_7 + 1 \right)} \right)
\end{gather*}

\begin{gather*}
\text{Do}(0, 7y) = \underline{
97.24058\%},f_7 = \underline{0.50154\%}\\
\end{gather*}

\noindent For subsequent cases, we will need to express \text{Do}(0, y) in a general term again due to the need for interpolation.\\

\noindent Using \text{Do}(0, X) for the last calculated discount factor and Using \text{Do}(0, Y) for the next discount factor needed:

\begin{gather*}
\text{Do}(0, Y) = 
\frac{PV_{X}^{} + \text{Do}(0,X)}{R_Y + 1}
\\
- \frac{\left[\sum_{i=1}^{X} D_0(0, X) + \text{Do}(0,X) \times (Y-X-1) + \frac{\text{Do}(0, Y)-\text{Do}(0, X)}{Y-X-1} \times \sum_{i=1}^{Y-X-1}x \right] \times R_Y}{R_Y + 1}
\end{gather*}

\noindent Now make \text{Do}(0,X) the subject of the formula, while substituting $PV_{X}^{} + \text{Do}(0,X) = 1$:

\begin{gather*}
\text{Do}(0, Y) = 
\frac{1-\left[ \sum_{i=1}^{X}\text{Do}(0,x) + \text{Do}(0,X)(Y-X-1) - \frac{\text{Do}(0,X)}{Y-X}(\sum_{i=1}^{Y-X-1}x)\right] \times R_Y}{R_y + 1} / \\ \left(1+
\frac{\sum_{i=1}^{Y-X-1}x \times R_Y}{(R_Y+1)(Y-X)} \right)
\end{gather*}

\noindent Using this methodology we can calculate the rest of the discount factors and overnight rates:

\begin{gather*}
\text{Do}(0, 10y) = \underline{
95.59769\%
},f_7 = \underline{0.57122\%}\\
\text{Do}(0, 15y) = \underline{
92.76115\%
},f_7 = \underline{0.60972\%}\\
\text{Do}(0, 20y) = \underline{
90.00759\%
},f_7 = \underline{0.60999\%}\\
\text{Do}(0, 30y) = \underline{
84.74067\%
},f_7 = \underline{0.61962\%}\\
\end{gather*}

\end{document}
